# Interaction Error Matrix

This document tracks all major user interactions, their expected outcomes, and potential or observed failure modes. It serves as a checklist for ensuring frontend stability and a correct user experience.

**Audit Date:** 2025-09-15
**Auditor:** Jules (AI Software Engineer)

| Action | Screen/Route | Called API / Event Source | Original Issue | Fix / Mitigation | Verification Method | Verification Status (2025-09-15) |
|---|---|---|---|---|---|---|
| Observing a live AI review | `/reviews/{reviewId}` | `GET /api/reviews/{review_id}/events` (SSE) | The page was static and did not show review progress. | **Resolved.** The backend endpoint was converted to a true SSE stream. The frontend `Review.jsx` page was refactored to use the `useEventSource` hook. | Local testing (as documented in `TEST_ENV_DESIGN.md`) will show the status and messages updating without a page refresh. | **Verified.** Static code analysis of `Review.jsx` confirms the use of a `useEventSource` hook pointing to the correct API endpoint. |
| Streaming chat response | Any chat view (`ChatInput.jsx`) | `/api/rooms/{roomId}/messages/stream` | The AI's response was not streamed. | **Resolved.** The backend endpoint now returns a `StreamingResponse`. `ChatInput.jsx` was refactored to use `fetch` to consume the stream. | Local testing will show the AI's response appearing token-by-token. | **Verified.** Static code analysis of `ChatInput.jsx` confirms the presence of a `streamMessageApi` function that correctly reads from a `fetch` response stream. |
| Replacing blocking alerts | All frontend components | N/A | Blocking `alert()` calls were used for error feedback, creating poor UX. | **Resolved.** Replaced all instances of `alert()` across the frontend with non-blocking `toast` notifications from `react-hot-toast`. | Manually triggering errors in the UI should show toast notifications instead of alerts. | **Partially Verified.** Manual and `grep` searches of the source code in `app/frontend/src` found no instances of `alert()`. However, a bundled file in `app/static` contains an `alert()` call, likely from a stale build. This should be confirmed by rebuilding the frontend. |
| Starting a new AI review | `/rooms/{sub_room_id}` | `POST /api/rooms/{parentId}/create-review-room` | An old, unused endpoint (`/api/reviews`) existed on the backend. | **Resolved.** The dead endpoint was deleted from `app/api/routes/reviews.py`. | Calling the old endpoint results in a 404. | **Verified.** A `grep` for `/api/reviews` shows no such route is defined in the application's routers. |
