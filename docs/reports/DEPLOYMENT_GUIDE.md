# 파일 저장소 및 호스팅 설명

안녕하세요! 현재 프로젝트의 파일 저장 방식과 실제 서비스를 위한 호스팅에 대해 Firebase와 비교하여 알기 쉽게 설명해 드리겠습니다.

## 1. 파일 저장소: 왜 로컬 `uploads` 폴더는 위험한가?

**현재 방식 (로컬 저장소):**
- 사용자가 파일을 업로드하면, 현재 실행 중인 **서버 컴퓨터의 `uploads`라는 폴더 안에** 파일이 그대로 저장됩니다.
- 제 컴퓨터에서 테스트할 때는 제 컴퓨터의 `uploads` 폴더에, 나중에 실제 서버 컴퓨터에서 실행하면 그 서버의 폴더에 저장됩니다.

**Firebase 방식 (클라우드 스토리지):**
- 사용자가 파일을 올리면, 그 파일은 내 컴퓨터나 서버가 아닌 **Firebase가 관리하는 거대한 온라인 저장 공간(클라우드 스토리지)에** 저장됩니다.

**문제점 및 비교:**

| 항목 | 현재 방식 (로컬 저장소) | Firebase 방식 (클라우드) | 설명 |
|---|---|---|---|
| **확장성** | **나쁨** | **매우 좋음** | 사용자가 많아져서 서버를 2대, 3대로 늘리면, A서버에 저장된 파일은 B서버에서 접근할 수 없습니다. 사용자는 어떤 서버에 접속될지 모르므로, 파일을 올렸는데 보이지 않는 문제가 발생합니다. 클라우드는 모든 서버가 동일한 저장소를 바라보므로 이런 문제가 없습니다. |
| **지속성** | **매우 위험** | **매우 안전** | 서버를 껐다 켜거나, 호스팅 서비스를 이전하거나, 서버에 문제가 생기면 `uploads` 폴더의 **파일이 모두 사라질 수 있습니다.** 클라우드는 파일들을 여러 곳에 안전하게 백업하며 보관해줍니다. |
| **효율성** | **나쁨** | **좋음** | 사용자가 파일을 다운로드할 때마다 우리 서버의 자원(트래픽)이 소모됩니다. 사용자가 많아지면 서버가 느려질 수 있습니다. 클라우드는 파일 전송에 최적화되어 있어 우리 서버에 부담을 주지 않습니다. |

**결론:** 현재의 로컬 저장 방식은 **개발 및 테스트용**입니다. 실제 서비스를 위해서는 반드시 **AWS S3, Google Cloud Storage** 같은 전문 클라우드 스토리지로 변경해야 합니다. 이는 필수적인 과정입니다.

## 2. 도메인 연결 및 호스팅

호스팅은 "우리 서버 프로그램을 24시간 365일 실행시켜주는 컴퓨터를 빌리는 서비스"이고, 도메인 연결은 "그 컴퓨터의 복잡한 IP 주소(예: `123.45.67.89`)에 `my-awesome-app.com` 같은 예쁜 이름을 붙여주는 것"입니다.

**현재 상태:**
- 현재 우리 앱은 `uvicorn`이라는 프로그램을 통해 "개발용 서버"로 실행되고 있습니다. 이것은 실제 서비스용으로는 부족합니다.

**실제 서비스(프로덕션)를 위한 과정:**

1.  **프로덕션 웹 서버 사용:**
    - `uvicorn`만 사용하는 대신, `Gunicorn`과 같은 강력한 웹 서버 프로그램과 함께 사용해야 합니다. `Gunicorn`이 여러 개의 `uvicorn` 프로세스를 관리하며 안정성을 높여줍니다. (제가 작성한 `scripts/start-prod.sh` 파일이 바로 `Gunicorn`으로 서버를 실행하는 스크립트입니다.)

2.  **클라우드 서버 호스팅:**
    - **AWS EC2, Google Cloud Platform(GCP) Compute Engine, Vercel, Heroku** 등과 같은 호스팅 서비스에 가입하여 "서버 컴퓨터"를 한 대 빌립니다.
    - 이 빌린 컴퓨터에 우리 프로젝트 코드를 업로드하고, 필요한 프로그램(Python, Node.js, PostgreSQL 등)을 설치합니다.
    - `start-prod.sh` 스크립트를 실행하여 우리 서버를 24시간 켜놓습니다.

3.  **데이터베이스 호스팅:**
    - 위에서 빌린 서버 컴퓨터에 직접 PostgreSQL을 설치할 수도 있지만, 보통은 **AWS RDS, Google Cloud SQL** 같은 "데이터베이스 전용 호스팅 서비스"를 사용하는 것이 훨씬 안정적이고 관리가 편합니다.

4.  **도메인 연결:**
    - **GoDaddy, 가비아** 등에서 원하시는 도메인 이름(예: `my-origin-app.com`)을 구매합니다.
    - 도메인 설정에서 "DNS 설정" 메뉴로 들어갑니다.
    - A 레코드라는 항목에, 위에서 빌린 서버 컴퓨터의 고정 IP 주소를 입력해줍니다.
    - 이렇게 하면, 사용자가 브라우저에 `my-origin-app.com`을 입력했을 때, DNS 서버가 우리가 빌린 서버의 IP 주소를 알려주어 사용자를 올바른 위치로 안내하게 됩니다.

**요약:** Firebase는 이 모든 복잡한 과정(서버, DB, 스토리지, 도메인 연결 등)을 하나의 플랫폼에서 쉽게 할 수 있도록 도와주는 '통합 서비스'입니다. 반면, 우리 프로젝트처럼 직접 하나하나 구성하는 방식은 더 복잡하지만, 훨씬 더 자유롭고 세밀한 설정이 가능하다는 장점이 있습니다.
