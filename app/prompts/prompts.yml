# ===============================================
# Centralized Prompt Management File
# ===============================================
# This file contains all prompts used by the application, structured for
# versioning and easy management.

# --- Review Prompts ---

review_initial_analysis:
  description: "Round 1 prompt where each model delivers its own viewpoint without scripted personas."
  default_version: v1
  versions:
    v1:
      template: |
        Round 1 – Independent Perspective
        Topic: {topic}
        Instruction: {instruction}

        You are participating as {panelist}. Share your candid assessment exactly as you normally would.
        - Be realistic and pragmatic about trade-offs, constraints, and upside.
        - Keep the tone analytical rather than theatrical; you are not role-playing.
        - Organize your thoughts for a teammate who will read this later.
        - Respond in the user's language when obvious, otherwise default to English.
        - The JSON schema you must emit is:
          {{
            "round": 1,
            "key_takeaway": "A concise headline capturing your stance.",
            "arguments": [
              "Core argument 1 (with reasoning)",
              "Core argument 2 (with reasoning)"
            ],
            "risks": ["Material risk 1", "Material risk 2"],
            "opportunities": ["Opportunity 1", "Opportunity 2"]
          }}

review_rebuttal:
  description: "Round 2 prompt where panelists react to each other by citing concrete quotes."
  default_version: v1
  versions:
    v1:
      template: |
        Round 2 – Response & Reflection ({panelist})
        Snapshot of your prior position:
        {self_snapshot}

        What the other panelists said:
        {others_digest}

        Build on the live discussion realistically.
        - Reference other panelists by name and quote short phrases when agreeing or pushing back.
        - Focus on clarifying disagreements or surfacing missing execution details.
        - Add practical follow-up ideas when you see a gap.
        - If nothing meaningful changed for you, set `"no_new_arguments"` to `true` and leave the lists empty.
        - Output must respect this JSON schema:
          {{
            "round": 2,
            "no_new_arguments": false,
            "agreements": [
              "One short sentence quoting or paraphrasing another panelist you agree with"
            ],
            "disagreements": [
              {{
                "point": "Quote or paraphrase the argument you are challenging",
                "reasoning": "Succinct explanation of your concern"
              }}
            ],
            "additions": [
              {{
                "point": "New insight or operational detail to add",
                "reasoning": "Why it matters now"
              }}
            ]
          }}

review_synthesis:
  description: "Round 3 prompt where each panelist converges on a realistic plan while acknowledging others."
  default_version: v1
  versions:
    v1:
      template: |
        Round 3 – Joint Synthesis ({panelist})
        Conversation highlights so far:
        {conversation_digest}

        Produce a grounded summary that moves the group toward an implementable plan.
        - Weave in the strongest points from others when forming your executive summary.
        - Call out the trade-offs you still worry about and how to monitor them.
        - Deliver concrete next steps that a project lead could execute immediately.
        - If you truly have nothing to add, set `"no_new_arguments"` to `true`.
        - Emit JSON using this schema:
          {{
            "round": 3,
            "no_new_arguments": false,
            "executive_summary": "Synthesis referencing the most persuasive quotes.",
            "conclusion": "Narrative explaining how the team should proceed.",
            "recommendations": [
              "Actionable recommendation 1",
              "Actionable recommendation 2"
            ]
          }}

review_resolution:
  description: "The prompt for Round 4 (Final Alignment) of the review process."
  default_version: v1
  versions:
    v1:
      template: |
        Final Alignment Round.
        You now have access to the synthesized round 3 perspectives for every panelist.

        {resolution_context}

        Provide your final stance that the observer should see. Focus on consensus signals, remaining disagreements, and concrete next steps.
        - If you truly have nothing to add beyond round 3, set `"no_new_arguments"` to `true` and keep the other fields concise.
        - Otherwise, highlight what changed for you after seeing the other syntheses.
        - Your output must be in the specified JSON format.
        - The JSON schema you must adhere to is:
          {{
            "round": 4,
            "no_new_arguments": false,
            "final_position": "Your final recommendation or stance.",
            "consensus_highlights": [
              "Strong agreement point 1",
              "Strong agreement point 2"
            ],
            "open_questions": [
              "Outstanding question or risk 1"
            ],
            "next_steps": [
              "Specific, follow-up action 1",
              "Specific, follow-up action 2"
            ]
          }}

review_final_report:
  description: "The prompt for generating the final consolidated report from all panelist's round 3 outputs."
  default_version: v1
  versions:
    v1:
      template: |
        The following are the panelist outputs by round (completed rounds: {rounds_completed}):
        {panelist_reports}

        Please create a consolidated final report.
        - In the executive summary, clearly state the strongest points of consensus and any significant remaining disagreements among the panelists.
        - Your output must be in the specified JSON format.
        - The JSON schema you must adhere to is:
          {{
            "executive_summary": "The final summary, including key insights from the entire discussion.",
            "strongest_consensus": [
              "Key point 1 that panelists commonly agreed on.",
              "Key point 2 that panelists commonly agreed on."
            ],
            "remaining_disagreements": [
              "Significant disagreement 1, if any."
            ],
            "recommendations": [
              "Consolidated final recommendation 1 (highest priority).",
              "Consolidated final recommendation 2."
            ]
          }}
