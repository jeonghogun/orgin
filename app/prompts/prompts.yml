# ===============================================
# Centralized Prompt Management File
# ===============================================
# This file contains all prompts used by the application, structured for
# versioning and easy management.

# --- Review Prompts ---

review_initial_analysis:
  description: "Round 1 prompt where each model delivers its own viewpoint without scripted personas."
  default_version: v1
  versions:
    v1:
      template: |
        독립 발언 단계 — 첫 견해
        검토 주제: {topic}
        사용자 지침:
        {instruction}

        당신은 {panelist}입니다. {persona_trait}
        지금은 모든 패널이 서로의 의견을 모른 채 첫 발언을 남기는 순간입니다.
        작성 규칙:
        1. 첫 문장에서 이번 주제에 대한 당신의 핵심 주장을 한 문장으로 명확히 제시하세요.
        2. 이어지는 2~3문장은 각각 하나의 근거를 다루며, 가능한 한 수치·사례·사실을 포함합니다.
        3. 마지막 문장은 실행이나 의사결정에 도움이 되는 짧은 결론으로 마무리합니다.
        4. 총 4~6문장 이내의 자연스러운 단락으로 작성하고, 불릿이나 번호 대신 문장으로만 구성합니다.
        5. 다른 패널을 언급하거나 추측하지 않습니다.
        6. references 배열은 비워 두고, `"no_new_arguments"`는 `false`로 설정합니다.
        7. 아래 JSON 스키마를 정확히 따릅니다.
          {{
            "round": 1,
            "panelist": "{panelist}",
            "message": "대화체 메시지",
            "key_takeaway": "짧은 요약",
            "references": [],
            "no_new_arguments": false
          }}

review_rebuttal:
  description: "Round 2 prompt where panelists react to each other by citing concrete quotes."
  default_version: v1
  versions:
    v1:
      template: |
        자유 토론 단계 — {panelist}
        검토 주제: {topic}
        사용자 지침:
        {instruction}
        당신이 방금 남긴 입장 요약:
        {self_snapshot}

        다른 패널들이 남긴 주요 발언:
        {others_digest}

        이제부터는 단톡방처럼 자연스럽게 대화를 이어갑니다. {persona_trait}
        작성 규칙:
        - 4~6문장 안에서 다른 패널의 발언을 직접 인용하거나 요약하며 반박·보완·공감·질문을 섞어 표현하세요.
        - references 배열에는 인용한 패널, 해당 발언의 라운드, 짧은 인용, 그리고 stance(support/challenge/build/clarify) 값을 기록합니다.
        - 주제 밖으로 벗어나지 말고, 인용한 내용에 기반한 추가 통찰이나 실행 아이디어를 제시하세요.
        - 새로운 논점이 없다면 `"no_new_arguments"`를 `true`로 설정하고 메시지를 짧게 정리합니다.
        - 아래 JSON 스키마를 그대로 따릅니다.
          {{
            "round": 2,
            "panelist": "{panelist}",
            "message": "대화체 메시지",
            "key_takeaway": "짧은 요약",
            "references": [
              {{
                "panelist": "다른 패널 이름",
                "round": 1,
                "quote": "짧은 인용",
                "stance": "support"
              }}
            ],
            "no_new_arguments": false
          }}

review_synthesis:
  description: "Round 3 prompt where each panelist converges on a realistic plan while acknowledging others."
  default_version: v1
  versions:
    v1:
      template: |
        토론 심화 단계 — {panelist}
        검토 주제: {topic}
        사용자 지침:
        {instruction}
        지금까지의 핵심 대화 맥락:
        {conversation_digest}

        이제는 자유 토론을 이어가며 합의와 남은 쟁점을 동시에 정리합니다. {persona_trait}
        작성 규칙:
        - 이전 발언을 인용하며 실행 전략, 위험 신호, 필요한 근거를 4~6문장으로 정리합니다.
        - references 배열에는 새롭게 인용한 발언을 기록하고 stance 를 support/challenge/build/clarify 중 하나로 지정합니다.
        - key_takeaway에는 실행 주체가 바로 이해할 수 있는 한 줄 요약을 남깁니다.
        - 새로운 주장이 없다면 `"no_new_arguments"`를 `true`로 하고 메시지를 짧게 유지합니다.
        - 아래 JSON 스키마를 그대로 따릅니다.
          {{
            "round": 3,
            "panelist": "{panelist}",
            "message": "대화체 메시지",
            "key_takeaway": "짧은 요약",
            "references": [
              {{
                "panelist": "다른 패널 이름",
                "round": 2,
                "quote": "핵심 인용",
                "stance": "build"
              }}
            ],
            "no_new_arguments": false
          }}

review_resolution:
  description: "The prompt for Round 4 (Final Alignment) of the review process."
  default_version: v1
  versions:
    v1:
      template: |
        토론 요약 카드 — {panelist}
        검토 주제: {topic}
        사용자 지침:
        {instruction}

        다음은 지금까지의 핵심 흐름입니다:
        {resolution_context}

        당신은 이번 토론을 대표해 마지막 요약 카드를 작성합니다. {persona_trait}
        작성 규칙:
        - `"final_position"`에는 전체 토론을 한 문장으로 정리한 결론을 남깁니다.
        - `"consensus_highlights"`에는 강하게 합의된 내용을 2~3개 bullet로 작성합니다.
        - `"open_questions"`에는 남은 쟁점이나 위험 신호를 1~2개 정리합니다.
        - `"next_steps"`에는 사용자에게 전달할 핵심 인사이트 또는 실행 힌트를 2~3개 남깁니다.
        - 새로운 내용이 없다면 `"no_new_arguments"`를 `true`로 지정하고, 그렇지 않다면 `false`로 둡니다.
        - 아래 JSON 스키마를 정확히 따릅니다.
          {{
            "round": 4,
            "no_new_arguments": false,
            "final_position": "Your final recommendation or stance.",
            "consensus_highlights": [
              "Strong agreement point 1",
              "Strong agreement point 2"
            ],
            "open_questions": [
              "Outstanding question or risk 1"
            ],
            "next_steps": [
              "Specific, follow-up action 1",
              "Specific, follow-up action 2"
            ]
          }}

review_final_report:
  description: "The prompt for generating the final consolidated report from all panelist's round 3 outputs."
  default_version: v1
  versions:
    v1:
      template: |
        The following are the panelist outputs by round (completed rounds: {rounds_completed}):
        {panelist_reports}

        Please create a consolidated final report.
        - In the executive summary, clearly state the strongest points of consensus and any significant remaining disagreements among the panelists.
        - Your output must be in the specified JSON format.
        - The JSON schema you must adhere to is:
          {{
            "executive_summary": "The final summary, including key insights from the entire discussion.",
            "strongest_consensus": [
              "Key point 1 that panelists commonly agreed on.",
              "Key point 2 that panelists commonly agreed on."
            ],
            "remaining_disagreements": [
              "Significant disagreement 1, if any."
            ],
            "recommendations": [
              "Consolidated final recommendation 1 (highest priority).",
              "Consolidated final recommendation 2."
            ]
          }}
